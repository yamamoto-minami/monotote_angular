<div class="login-wrapper">
  <div class="o-wrapper o-wrapper--small">
    <div class="c-signup">

      <header class="c-signup__header box">
        <div class="u-mb-"><i class="icon-monotote"></i></div>
      </header>

      <form class="o-form" name="requestLinkForm" ng-submit="requestForgotPasswordLink(requestLinkForm)" novalidate ng-if="!hasToken">

        <div class="box" ng-if="!resultSuccess">
          <h2 class="delta">Send recovery link</h2>

          <div class="o-form__field">
            <label for="recovery_email">Email</label>
            <input id="recovery_email" type="email" class="input" ng-class="{has_error:requestLinkForm.$submitted && (requestLinkForm.user_email.$error.required || requestLinkForm.user_email.$error.email)}" placeholder="Your email" name="user_email" ng-model="user.email"
                   ng-required="true">

            <div class="o-form__notification o-form__notification--error">
              <span class="error" ng-show="requestLinkForm.$submitted && requestLinkForm.user_email.$error.required">Please enter your email.</span>
              <span class="error" ng-show="requestLinkForm.$submitted && requestLinkForm.user_email.$error.email">Please enter a valid email.</span>
            </div>
          </div>
          
          <div class="o-form__notification o-form__notification--error" ng-show="errors">
            <span class="error">{{ errors }}</span>
          </div>


          <button type="submit" class="btn btn--full u-mb-">Send</button>

          <a ui-sref="login" class="btn btn--full btn--alt">Go back</a>

        </div>
        
        <div class="box o-form-success" ng-if="resultSuccess">
          <p>Recovery link was successfully sent</p>
          
          <a ui-sref="login" class="btn btn--full btn--alt">Go back</a>
        </div>

      </form>
      
      <form class="o-form" name="passwordResetForm" ng-submit="resetForgottenPassword(passwordResetForm)" novalidate ng-if="hasToken">

        <div class="box">
          <h2 class="delta">Set new password</h2>

          <div class="o-form__field">
            <input type="password" class="input" placeholder="New password" name="user_password"
                   ng-model="user.password" ng-required="true">

            <div class="o-form__notification o-form__notification--error">
            <span class="error"
                  ng-show="(passwordResetForm.$submitted || passwordResetForm.user_password.$touched) && passwordResetForm.user_password.$error.required">Please enter new password.</span>
            </div>
          </div>
          
          <div class="o-form__field">
            <input type="password" class="input" placeholder="Repeat password" name="user_repeat_password"
                   ng-model="user.repeatPassword" ng-required="true">

            <div class="o-form__notification o-form__notification--error">
            <span class="error"
                  ng-show="(passwordResetForm.$submitted || passwordResetForm.user_repeat_password.$touched) && passwordResetForm.user_repeat_password.$error.required">Please repeat the password.</span>
            <span class="error"
                  ng-show="(passwordResetForm.$submitted || passwordResetForm.user_repeat_password.$touched) && user.repeatPassword && user.password !== user.repeatPassword">Password doesn't match.</span>
            </div>
          </div>
          
          <div class="o-form__notification o-form__notification--error" ng-show="errors">
            <span class="error">{{ errors }}</span>
          </div>


          <button type="submit" class="btn btn--full">Reset password</button>

        </div>

      </form>
    </div>
  </div>
</div>